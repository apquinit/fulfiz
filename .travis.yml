language: php

dist: trusty

php:
  - '7.3'
  
before_script:
  - cp .env.testing .env
  - composer install --no-interaction
  - touch database/database.sqlite
  - php artisan migrate --database=sqlite
  - php artisan key:generate
  
script:
  - vendor/bin/phpcs --config-set show_warnings 0
  - vendor/bin/phpcs --standard=PSR2 --extensions=php --ignore=*/routes/*,*/migrations/*,*/tests/* app
  - vendor/bin/phpunit --coverage-text --testdox